<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ULTRA HUB: EVOLUTION 2.0</title>
    <style>
        :root {
            --p: #00f2ff;
            --s: #ff00ff;
            --bg: #050505;
            --card: rgba(255, 255, 255, 0.08);
            --text: #fff;
            --border: rgba(0, 242, 255, 0.3);
        }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            overflow: hidden;
            height: 100vh;
            transition: background 0.5s;
        }
        body.mobile { font-size: 18px; }
        body.light-theme {
            --bg: #f0f0f0;
            --card: rgba(0, 0, 0, 0.08);
            --text: #000;
            --border: rgba(0, 0, 0, 0.2);
        }
        body.neon-theme {
            --bg: #0a0a1a;
            --p: #00ff9d;
            --s: #ff00ff;
            --border: #00ff9d;
        }
        body.cyber-theme {
            --bg: #000;
            --p: #ff0055;
            --s: #00ffea;
            --card: rgba(255, 0, 85, 0.1);
            --border: #ff0055;
        }

        /* –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è */
        #auth-overlay {
            position: fixed; inset: 0;
            background: linear-gradient(135deg, #000 0%, #0a0a2a 100%);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }
        .auth-card {
            background: var(--card);
            padding: 30px;
            border-radius: 30px;
            border: 2px solid var(--p);
            text-align: center;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 0 50px var(--p);
        }

        /* UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã */
        select, input, .btn {
            width: 100%;
            padding: 14px;
            margin-top: 10px;
            border-radius: 12px;
            border: 2px solid var(--p);
            background: rgba(0,0,0,0.5);
            color: var(--text);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn:hover {
            background: var(--p);
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 242, 255, 0.4);
        }
        .btn-small { padding: 8px 12px; font-size: 12px; }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        #main-content { display: none; height: 100vh; flex-direction: column; }
        nav {
            display: flex;
            gap: 5px;
            padding: 12px;
            background: rgba(0,0,0,0.9);
            border-bottom: 2px solid var(--p);
            overflow-x: auto;
        }
        nav button {
            background: transparent;
            border: 2px solid var(--p);
            color: var(--p);
            padding: 10px 15px;
            border-radius: 10px;
            font-size: 11px;
            white-space: nowrap;
            transition: all 0.3s;
        }
        nav button:hover {
            background: var(--p);
            color: #000;
        }
        nav button.active {
            background: var(--p);
            color: #000;
        }

        /* –°–µ–∫—Ü–∏–∏ */
        section {
            display: none;
            padding: 20px;
            flex-grow: 1;
            overflow-y: auto;
            text-align: center;
        }
        section.active {
            display: block;
            animation: slideUp 0.4s ease;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--card);
            padding: 20px;
            border-radius: 25px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        /* –¢–∞–º–∞–≥–æ—á–∏ */
        #tom-container {
            position: relative;
            margin: 20px auto;
            width: 200px;
            height: 200px;
        }
        #tom-state {
            font-size: 100px;
            display: block;
            margin: 0;
            transition: transform 0.3s;
            position: relative;
            z-index: 2;
        }
        .tom-clothes {
            position: absolute;
            top: 0;
            left: 0;
            font-size: 60px;
            z-index: 3;
            pointer-events: none;
        }
        .stat-row {
            margin: 15px 0;
            text-align: left;
        }
        .bar {
            height: 12px;
            background: #222;
            border-radius: 6px;
            overflow: hidden;
            border: 1px solid #333;
            margin-top: 5px;
        }
        .fill {
            height: 100%;
            background: var(--p);
            width: 100%;
            transition: width 0.5s;
        }
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        /* –ú–∞–≥–∞–∑–∏–Ω —è–∏—Ü */
        .egg {
            padding: 15px;
            border-radius: 20px;
            border: 2px solid;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .egg:hover { transform: scale(1.05); }
        .egg-common { border-color: #888; background: #333; }
        .egg-rare { border-color: #00ff00; background: #003300; }
        .egg-epic { border-color: #ff00ff; background: #330033; }
        .egg-mythic { border-color: #ff9900; background: #332200; }
        .egg-legendary { border-color: #ffff00; background: #333300; }
        .egg-secret { border-color: #ffffff; background: #666; }
        .egg-god { border-color: #00ffff; background: #003333; }
        .egg h3 { margin: 0; font-size: 14px; }
        .egg .price { color: gold; font-weight: bold; }

        /* –ü–∏—Ç–æ–º—Ü—ã */
        .pet-card {
            padding: 10px;
            border: 1px solid var(--p);
            border-radius: 15px;
            margin: 5px;
            text-align: center;
        }
        .pet-icon { font-size: 40px; display: block; }

        /* –ò–≥—Ä–∞ Counter-Strike */
        #cs-game {
            position: relative;
            width: 100%;
            height: 400px;
            background: #1a1a2e;
            border: 2px solid var(--p);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px auto;
        }
        .player {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #00ff00;
            border-radius: 50%;
            transition: transform 0.1s;
        }
        .enemy {
            position: absolute;
            width: 30px;
            height: 30px;
            background: #ff0000;
            border-radius: 50%;
        }
        .bullet {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ffff00;
            border-radius: 50%;
        }
        .mobile-controls {
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .mobile-controls button {
            padding: 20px;
            font-size: 24px;
            background: rgba(255,255,255,0.2);
            border: 2px solid var(--p);
        }
        body.mobile .mobile-controls { display: grid; }

        /* –ß–∞—Ç */
        #chat-container {
            height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 15px;
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(0,0,0,0.3);
        }
        .message {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 10px;
            background: rgba(0, 242, 255, 0.1);
            text-align: left;
            border-left: 3px solid var(--p);
        }
        .message.me {
            background: rgba(0, 255, 0, 0.1);
            border-left-color: #00ff00;
        }
        .message-time {
            font-size: 10px;
            color: #888;
            float: right;
        }

        /* –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å */
        #admin-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(100, 0, 0, 0.95);
            padding: 30px;
            border-radius: 20px;
            z-index: 10001;
            display: none;
            border: 3px solid #fff;
            min-width: 300px;
        }
        #admin-panel h3 {
            color: #fff;
            margin-top: 0;
            text-align: center;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        @media (max-width: 768px) {
            .grid { grid-template-columns: repeat(2, 1fr); }
            #tom-state { font-size: 80px; }
            #cs-game { height: 300px; }
            .auth-card { width: 95%; padding: 20px; }
        }
        @media (min-width: 1024px) {
            .grid { grid-template-columns: repeat(4, 1fr); }
        }
    </style>
</head>
<body id="body">

<!-- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è -->
<div id="auth-overlay">
    <div class="auth-card">
        <h2 style="color:var(--p)">CYBER IDENTITY 2.0</h2>
        <select id="user-select">
            <option>–ù–∏–∫–∏—Ç–∞</option>
            <option>–ê–ª–µ–Ω–∞</option>
            <option>–°–∞—à–∞</option>
            <option>–ê–ª–∏—Å–∞</option>
        </select>
        <select id="device-select">
            <option value="pc">–ö–æ–º–ø—å—é—Ç–µ—Ä</option>
            <option value="mobile">–°–º–∞—Ä—Ç—Ñ–æ–Ω</option>
        </select>
        <input type="password" id="password-input" placeholder="–ü–ê–†–û–õ–¨" autocomplete="off">
        <button class="btn" onclick="identify()">ACCESS HUB</button>
        <p style="font-size: 12px; margin-top: 15px; color: #888;">–ü–∞—Ä–æ–ª—å: –ª—é–±–æ–π</p>
    </div>
</div>

<!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
<div id="admin-panel">
    <h3>‚ö° ADMIN PANEL ‚ö°</h3>
    <button class="btn" onclick="addBytes(100000)">+100K BYTES</button>
    <button class="btn" onclick="addBytes(1000000)">+1M BYTES</button>
    <button class="btn" onclick="unlockAll()">–†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–¢–¨ –í–°–Å</button>
    <button class="btn" style="background:red" onclick="fullReset()">WIPE ALL DATA</button>
    <button class="btn" onclick="document.getElementById('admin-panel').style.display='none'">CLOSE</button>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
<div id="main-content">
    <nav>
        <button onclick="switchTab('home')" class="active">CORE</button>
        <button onclick="switchTab('tom')">–¢–û–ú 2</button>
        <button onclick="switchTab('miner')">MINER</button>
        <button onclick="switchTab('eggs')">–Ø–ô–¶–ê</button>
        <button onclick="switchTab('pets')">–ü–ò–¢–û–ú–¶–´</button>
        <button onclick="switchTab('shop')">–û–î–ï–ñ–î–ê</button>
        <button onclick="switchTab('cs')">CS 2</button>
        <button onclick="switchTab('chat')">–ß–ê–¢</button>
        <button onclick="switchTab('settings')">–ù–ê–°–¢–†–û–ô–ö–ò</button>
        <button onclick="switchTab('rating')">–†–ï–ô–¢–ò–ù–ì</button>
        <button onclick="switchTab('exit')">–í–´–•–û–î</button>
    </nav>

    <!-- –ì–ª–∞–≤–Ω–∞—è -->
    <section id="home" class="active">
        <div class="card">
            <h1 id="clock" style="font-size: 3.5rem; margin:0; text-shadow: 0 0 10px var(--p);">00:00:00</h1>
            <p id="user-tag" style="color:var(--p); font-size: 1.2rem;"></p>
            <div style="margin-top: 20px;">
                <h3>–°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                <p>–ë–∞–ª–∞–Ω—Å: <span id="balance-display">0</span> BYTES</p>
                <p>–ü–∏—Ç–æ–º—Ü–µ–≤: <span id="pets-count">0</span></p>
                <p>–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–π: <span id="rebirth-count">0</span></p>
                <p>–ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multiplier">1x</span></p>
            </div>
        </div>
    </section>

    <!-- –¢–∞–º–∞–≥–æ—á–∏ -->
    <section id="tom">
        <div class="card">
            <div id="tom-container">
                <div id="tom-state">üò∏</div>
                <div id="tom-clothes" class="tom-clothes"></div>
            </div>
            <div class="stat-row">
                –ó–¥–æ—Ä–æ–≤—å–µ: <span id="tom-health">100</span>%
                <div class="bar"><div id="h-bar" class="fill" style="background:#ff5555"></div></div>
            </div>
            <div class="stat-row">
                –ï–¥–∞: <span id="tom-food">100</span>%
                <div class="bar"><div id="f-bar" class="fill" style="background:#55ff55"></div></div>
            </div>
            <div class="stat-row">
                –≠–Ω–µ—Ä–≥–∏—è: <span id="tom-energy">100</span>%
                <div class="bar"><div id="e-bar" class="fill" style="background:#ffcc00"></div></div>
            </div>
            <div class="stat-row">
                –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: <span id="tom-mood">100</span>%
                <div class="bar"><div id="m-bar" class="fill" style="background:#aa55ff"></div></div>
            </div>
            <div class="actions">
                <button class="btn btn-small" onclick="tomAction('feed')">üçï –ö–û–†–ú–ò–¢–¨</button>
                <button class="btn btn-small" onclick="tomAction('sleep')">üò¥ –°–ü–ê–¢–¨</button>
                <button class="btn btn-small" onclick="tomAction('play')">‚öΩ –ò–ì–†–ê–¢–¨</button>
                <button class="btn btn-small" onclick="tomAction('clean')">üõÅ –ú–´–¢–¨</button>
                <button class="btn btn-small" onclick="tomAction('heal')">üíä –õ–ï–ß–ò–¢–¨</button>
                <button class="btn btn-small" onclick="tomAction('pet')">‚ù§ –ì–õ–ê–î–ò–¢–¨</button>
            </div>
            <p id="tom-message" style="min-height: 20px; margin-top: 10px; color: var(--s);"></p>
        </div>
    </section>

    <!-- –ú–∞–π–Ω–µ—Ä -->
    <section id="miner">
        <div class="card">
            <h2 id="bytes-display">0 BYTES</h2>
            <p>–ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="miner-multiplier">1x</span></p>
            <div id="core" onclick="clickCore()" style="width: 150px; height: 150px; background: radial-gradient(circle, var(--p) 0%, transparent 70%); border-radius: 50%; border: 5px solid #fff; margin: 30px auto; cursor: pointer; transition: transform 0.1s;"></div>
            <p>–ö–ª–∏–∫–∞–π –¥–ª—è –¥–æ–±—ã—á–∏ BYTES!</p>
            <button class="btn" onclick="prestige()" style="margin-top: 20px;">üîÑ –ü–ï–†–ï–†–û–ñ–î–ï–ù–ò–ï (<span id="prestige-cost">10000</span> BYTES)</button>
        </div>
    </section>

    <!-- –ú–∞–≥–∞–∑–∏–Ω —è–∏—Ü -->
    <section id="eggs">
        <div class="card">
            <h3>üê£ –ú–ê–ì–ê–ó–ò–ù –Ø–ò–¶</h3>
            <p>–í–∞—à–∏ BYTES: <span id="egg-balance">0</span></p>
            <div class="grid">
                <div class="egg egg-common" onclick="buyEgg('common')">
                    <h3>–û–±—ã—á–Ω–æ–µ</h3>
                    <div class="price">100 BYTES</div>
                    <p>–®–∞–Ω—Å—ã: –û–±—ã—á–Ω—ã–π 80%, –†–µ–¥–∫–∏–π 15%, –≠–ø–∏—á–µ—Å–∫–∏–π 4%, –ú–∏—Ñ–∏—á–µ—Å–∫–∏–π 1%</p>
                </div>
                <div class="egg egg-rare" onclick="buyEgg('rare')">
                    <h3>–†–µ–¥–∫–æ–µ</h3>
                    <div class="price">500 BYTES</div>
                    <p>–®–∞–Ω—Å—ã: –†–µ–¥–∫–∏–π 70%, –≠–ø–∏—á–µ—Å–∫–∏–π 25%, –ú–∏—Ñ–∏—á–µ—Å–∫–∏–π 4%, –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π 1%</p>
                </div>
                <div class="egg egg-epic" onclick="buyEgg('epic')">
                    <h3>–≠–ø–∏—á–µ—Å–∫–æ–µ</h3>
                    <div class="price">2,000 BYTES</div>
                    <p>–®–∞–Ω—Å—ã: –≠–ø–∏—á–µ—Å–∫–∏–π 65%, –ú–∏—Ñ–∏—á–µ—Å–∫–∏–π 30%, –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π 4%, –°–µ–∫—Ä–µ—Ç–Ω–æ–µ 1%</p>
                </div>
                <div class="egg egg-mythic" onclick="buyEgg('mythic')">
                    <h3>–ú–∏—Ñ–∏—á–µ—Å–∫–æ–µ</h3>
                    <div class="price">10,000 BYTES</div>
                    <p>–®–∞–Ω—Å—ã: –ú–∏—Ñ–∏—á–µ—Å–∫–∏–π 60%, –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π 35%, –°–µ–∫—Ä–µ—Ç–Ω–æ–µ 4%, –ë–æ–≥ 1%</p>
                </div>
                <div class="egg egg-legendary" onclick="buyEgg('legendary')">
                    <h3>–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–æ–µ</h3>
                    <div class="price">50,000 BYTES</div>
                    <p>–®–∞–Ω—Å—ã: –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π 70%, –°–µ–∫—Ä–µ—Ç–Ω–æ–µ 25%, –ë–æ–≥ 5%</p>
                </div>
                <div class="egg egg-secret" onclick="buyEgg('secret')">
                    <h3>–°–µ–∫—Ä–µ—Ç–Ω–æ–µ</h3>
                    <div class="price">250,000 BYTES</div>
                    <p>–®–∞–Ω—Å—ã: –°–µ–∫—Ä–µ—Ç–Ω–æ–µ 85%, –ë–æ–≥ 15%</p>
                </div>
                <div class="egg egg-god" onclick="buyEgg('god')">
                    <h3>–ë–û–ì –Ø–ô–¶–û</h3>
                    <div class="price">1,000,000 BYTES</div>
                    <p>–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ: –ë–æ–≥-–ø–∏—Ç–æ–º–µ—Ü + 3 —Å–ª—É—á–∞–π–Ω—ã—Ö –ª–µ–≥–µ–¥–∞—Ä–Ω—ã—Ö</p>
                </div>
            </div>
            <div id="egg-result" style="margin-top: 20px; padding: 15px; border-radius: 15px; background: rgba(0,255,0,0.1); display: none;"></div>
        </div>
    </section>

    <!-- –ü–∏—Ç–æ–º—Ü—ã -->
    <section id="pets">
        <div class="card">
            <h3>üé™ –í–ê–®–ò –ü–ò–¢–û–ú–¶–´</h3>
            <p>–í—Å–µ–≥–æ: <span id="total-pets">0</span> | –ê–∫—Ç–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã: <span id="active-bonuses">0</span></p>
            <div class="grid" id="pets-container"></div>
            <button class="btn" onclick="activateAllPets()" style="margin-top: 20px;">‚ö° –ê–ö–¢–ò–í–ò–†–û–í–ê–¢–¨ –í–°–ï–• –ü–ò–¢–û–ú–¶–ï–í</button>
        </div>
    </section>

    <!-- –ú–∞–≥–∞–∑–∏–Ω –æ–¥–µ–∂–¥—ã -->
    <section id="shop">
        <div class="card">
            <h3>üëï –ú–ê–ì–ê–ó–ò–ù –û–î–ï–ñ–î–´ –î–õ–Ø –ö–û–¢–ê</h3>
            <p>–í–∞—à–∏ BYTES: <span id="shop-balance">0</span></p>
            <div class="grid">
                <div class="shop-item" onclick="buyClothing('hat', 1000)">
                    <h4>üé© –®–ª—è–ø–∞</h4>
                    <p>1000 BYTES</p>
                </div>
                <div class="shop-item" onclick="buyClothing('glasses', 2000)">
                    <h4>üëì –û—á–∫–∏</h4>
                    <p>2000 BYTES</p>
                </div>
                <div class="shop-item" onclick="buyClothing('tie', 1500)">
                    <h4>üëî –ì–∞–ª—Å—Ç—É–∫</h4>
                    <p>1500 BYTES</p>
                </div>
                <div class="shop-item" onclick="buyClothing('cape', 5000)">
                    <h4>üß£ –ü–ª–∞—â</h4>
                    <p>5000 BYTES</p>
                </div>
                <div class="shop-item" onclick="buyClothing('crown', 10000)">
                    <h4>üëë –ö–æ—Ä–æ–Ω–∞</h4>
                    <p>10000 BYTES</p>
                </div>
                <div class="shop-item" onclick="buyClothing('armor', 20000)">
                    <h4>üõ°Ô∏è –ë—Ä–æ–Ω—è</h4>
                    <p>20000 BYTES</p>
                </div>
            </div>
            <h4 style="margin-top: 30px;">–í–∞—à–∞ –æ–¥–µ–∂–¥–∞:</h4>
            <div id="owned-clothing" class="grid"></div>
        </div>
    </section>

    <!-- Counter-Strike –∏–≥—Ä–∞ -->
    <section id="cs">
        <div class="card">
            <h3>üî´ COUNTER-STRIKE 2 MINI</h3>
            <select id="map-select" onchange="changeMap()" style="margin-bottom: 15px;">
                <option value="dust2">Dust II</option>
                <option value="inferno">Inferno</option>
            </select>
            <select id="game-mode" onchange="changeGameMode()" style="margin-bottom: 15px;">
                <option value="1v1">1 vs 1 (–±–æ—Ç)</option>
                <option value="4v4">4 vs 4 (–±–æ—Ç—ã)</option>
            </select>
            <div id="cs-game"></div>
            <div class="mobile-controls">
                <button onclick="movePlayer('up')">‚Üë</button>
                <button onclick="movePlayer('left')">‚Üê</button>
                <button onclick="shoot()">FIRE</button>
                <button onclick="movePlayer('down')">‚Üì</button>
                <button onclick="movePlayer('right')">‚Üí</button>
                <button onclick="reloadGame()">R</button>
            </div>
            <p style="margin-top: 15px;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: WASD (–¥–≤–∏–∂–µ–Ω–∏–µ), SPACE (–æ–≥–æ–Ω—å), R (–ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∞)</p>
            <p>–°—á—ë—Ç: <span id="cs-score">0</span> | –ó–¥–æ—Ä–æ–≤—å–µ: <span id="cs-health">100</span> | –ü–∞—Ç—Ä–æ–Ω—ã: <span id="cs-ammo">30</span>/120</p>
        </div>
    </section>

    <!-- –ß–∞—Ç -->
    <section id="chat">
        <div class="card">
            <h3>üí¨ –ú–ò–ù–ò-–ß–ê–¢</h3>
            <div id="chat-container"></div>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="chat-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." style="flex-grow: 1;">
                <button class="btn" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
            <p style="font-size: 12px; color: #888; margin-top: 10px;">–°–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
        </div>
    </section>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <section id="settings">
        <div class="card">
            <h3>‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò</h3>
            <h4>–¢–µ–º–∞:</h4>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
                <button class="btn" onclick="setTheme('dark')">–¢—ë–º–Ω–∞—è</button>
                <button class="btn" onclick="setTheme('light')">–°–≤–µ—Ç–ª–∞—è</button>
                <button class="btn" onclick="setTheme('neon')">–ù–µ–æ–Ω–æ–≤–∞—è</button>
                <button class="btn" onclick="setTheme('cyber')">–ö–∏–±–µ—Ä–ø–∞–Ω–∫</button>
            </div>
            <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π:</h4>
            <select id="control-type" onchange="changeControls()">
                <option value="auto">–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</option>
                <option value="keyboard">–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞</option>
                <option value="touch">–°–µ–Ω—Å–æ—Ä–Ω–æ–µ</option>
            </select>
            <h4 style="margin-top: 30px;">–û —Å–∏—Å—Ç–µ–º–µ:</h4>
            <p>–í–µ—Ä—Å–∏—è: ULTRA HUB 2.0</p>
            <p>–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ</p>
            <p>–î–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –Ω–∞–∂–º–∏—Ç–µ F8 (—Ç–æ–ª—å–∫–æ –ù–∏–∫–∏—Ç–∞)</p>
        </div>
    </section>

    <!-- –†–µ–π—Ç–∏–Ω–≥ -->
    <section id="rating">
        <div class="card">
            <h3>üèÜ –¢–ê–ë–õ–ò–¶–ê –õ–ò–î–ï–†–û–í</h3>
            <div id="leader-list"></div>
        </div>
    </section>

    <!-- –í—ã—Ö–æ–¥ -->
    <section id="exit">
        <div class="card">
            <button class="btn" onclick="location.reload()">–í–´–ô–¢–ò –ò–ó –ê–ö–ö–ê–£–ù–¢–ê</button>
            <button class="btn" style="background: #ff5555; margin-top: 20px;" onclick="fullReset()">–°–ë–†–û–°–ò–¢–¨ –í–°–ï –î–ê–ù–ù–´–ï</button>
            <p style="margin-top: 30px; color: #888; font-size: 12px;">–ü—Ä–∏ —Å–±—Ä–æ—Å–µ —É–¥–∞–ª—è—Ç—Å—è –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
        </div>
    </section>
</div>

<script>
// ====================
// –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
// ====================
let currentUser = "";
let currentDevice = "";
let gameInterval = null;
let csInterval = null;

// –î–∞–Ω–Ω—ã–µ –∏–∑ localStorage
let hubData = JSON.parse(localStorage.getItem('hub_data')) || {
    "–ù–∏–∫–∏—Ç–∞": { bytes: 1000, rebirths: 0, pets: [], clothing: [], theme: 'dark' },
    "–ê–ª–µ–Ω–∞": { bytes: 500, rebirths: 0, pets: [], clothing: [], theme: 'dark' },
    "–°–∞—à–∞": { bytes: 300, rebirths: 0, pets: [], clothing: [], theme: 'dark' },
    "–ê–ª–∏—Å–∞": { bytes: 200, rebirths: 0, pets: [], clothing: [], theme: 'dark' }
};

// –ß–∞—Ç
let chatData = JSON.parse(localStorage.getItem('hub_chat')) || [];

// –¢–∞–º–∞–≥–æ—á–∏
let tomData = JSON.parse(localStorage.getItem('hub_tom')) || {
    health: 100,
    food: 100,
    energy: 100,
    mood: 100,
    clothing: null,
    lastUpdate: Date.now()
};

// –ü–∏—Ç–æ–º—Ü—ã
const petsDatabase = {
    common: [
        { id: 1, name: "–ö–æ—Ç—ë–Ω–æ–∫", emoji: "üê±", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.1x", value: 0.1 },
        { id: 2, name: "–©–µ–Ω–æ–∫", emoji: "üê∂", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.1x", value: 0.1 },
        { id: 3, name: "–•–æ–º—è–∫", emoji: "üêπ", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.05x", value: 0.05 }
    ],
    rare: [
        { id: 4, name: "–õ–∏—Å–∞", emoji: "ü¶ä", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.2x", value: 0.2 },
        { id: 5, name: "–ï–Ω–æ—Ç", emoji: "ü¶ù", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.2x", value: 0.2 },
        { id: 6, name: "–ü–∞–Ω–¥–∞", emoji: "üêº", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.15x", value: 0.15 }
    ],
    epic: [
        { id: 7, name: "–î—Ä–∞–∫–æ–Ω", emoji: "üê≤", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.5x", value: 0.5 },
        { id: 8, name: "–ï–¥–∏–Ω–æ—Ä–æ–≥", emoji: "ü¶Ñ", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.5x", value: 0.5 },
        { id: 9, name: "–§–µ–Ω–∏–∫—Å", emoji: "üî•", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.4x", value: 0.4 }
    ],
    mythic: [
        { id: 10, name: "–ì—Ä–∏—Ñ–æ–Ω", emoji: "ü¶Ö", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +1x", value: 1 },
        { id: 11, name: "–ö—Ä–∞–∫–µ–Ω", emoji: "üêô", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +1x", value: 1 },
        { id: 12, name: "–¶–µ—Ä–±–µ—Ä", emoji: "üêï‚Äçü¶∫", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +0.8x", value: 0.8 }
    ],
    legendary: [
        { id: 13, name: "–ê–Ω–≥–µ–ª", emoji: "üëº", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +2x", value: 2 },
        { id: 14, name: "–î–µ–º–æ–Ω", emoji: "üòà", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +2x", value: 2 },
        { id: 15, name: "–¢–∏—Ç–∞–Ω", emoji: "üóø", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +1.5x", value: 1.5 }
    ],
    secret: [
        { id: 16, name: "–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∏–Ω", emoji: "üëΩ", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +3x", value: 3 },
        { id: 17, name: "–ü—Ä–∏–∑—Ä–∞–∫", emoji: "üëª", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +3x", value: 3 },
        { id: 18, name: "–†–æ–±–æ—Ç", emoji: "ü§ñ", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +2.5x", value: 2.5 }
    ],
    god: [
        { id: 19, name: "–ë–û–ì-–ö–û–¢", emoji: "üòº‚ö°", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +5x", value: 5 },
        { id: 20, name: "–í–°–ï–õ–ï–ù–ù–ê–Ø", emoji: "üåå", bonus: "–ú–Ω–æ–∂–∏—Ç–µ–ª—å +5x", value: 5 }
    ]
};

// –¶–µ–Ω—ã —è–∏—Ü
const eggPrices = {
    common: 100,
    rare: 500,
    epic: 2000,
    mythic: 10000,
    legendary: 50000,
    secret: 250000,
    god: 1000000
};

// –û–¥–µ–∂–¥–∞
const clothingItems = {
    hat: { name: "üé© –®–ª—è–ø–∞", price: 1000, emoji: "üé©" },
    glasses: { name: "üëì –û—á–∫–∏", price: 2000, emoji: "üëì" },
    tie: { name: "üëî –ì–∞–ª—Å—Ç—É–∫", price: 1500, emoji: "üëî" },
    cape: { name: "üß£ –ü–ª–∞—â", price: 5000, emoji: "üß£" },
    crown: { name: "üëë –ö–æ—Ä–æ–Ω–∞", price: 10000, emoji: "üëë" },
    armor: { name: "üõ°Ô∏è –ë—Ä–æ–Ω—è", price: 20000, emoji: "üõ°Ô∏è" }
};

// ====================
// –§–£–ù–ö–¶–ò–ò –°–ò–°–¢–ï–ú–´
// ====================
function identify() {
    const user = document.getElementById('user-select').value;
    const device = document.getElementById('device-select').value;
    const password = document.getElementById('password-input').value;
    
    if (!password) {
        alert("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å!");
        return;
    }
    
    currentUser = user;
    currentDevice = device;
    
    // –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
    if (device === 'mobile') {
        document.body.classList.add('mobile');
        document.getElementById('control-type').value = 'touch';
    } else {
        document.body.classList.remove('mobile');
        document.getElementById('control-type').value = 'keyboard';
    }
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    setTheme(hubData[user]?.theme || 'dark');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    document.getElementById('auth-overlay').style.display = 'none';
    document.getElementById('main-content').style.display = 'flex';
    document.getElementById('user-tag').innerText = `IDENTIFIED: ${user} | DEVICE: ${device.toUpperCase()}`;
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏—Å—Ç–µ–º—ã
    updateAllUI();
    startTomSystem();
    loadChat();
    startGameClock();
    renderLeaders();
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É CS –µ—Å–ª–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ
    if (document.getElementById('cs').classList.contains('active')) {
        startCSGame();
    }
}

function switchTab(tabId) {
    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
    document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é
    document.querySelectorAll('section').forEach(section => {
        section.classList.remove('active');
    });
    document.getElementById(tabId).classList.add('active');
    
    // –û—Å–æ–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤–∫–ª–∞–¥–æ–∫
    if (tabId === 'cs') {
        startCSGame();
    }
    if (tabId === 'rating') {
        renderLeaders();
    }
    if (tabId === 'chat') {
        scrollChatToBottom();
    }
}

function updateAllUI() {
    const userData = hubData[currentUser] || { bytes: 0, rebirths: 0, pets: [] };
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –≤–µ–∑–¥–µ
    document.getElementById('balance-display').textContent = userData.bytes;
    document.getElementById('bytes-display').textContent = userData.bytes + ' BYTES';
    document.getElementById('egg-balance').textContent = userData.bytes;
    document.getElementById('shop-balance').textContent = userData.bytes;
    
    // –ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è
    document.getElementById('rebirth-count').textContent = userData.rebirths || 0;
    document.getElementById('multiplier').textContent = (1 + (userData.rebirths || 0) * 0.5).toFixed(1) + 'x';
    document.getElementById('miner-multiplier').textContent = (1 + (userData.rebirths || 0) * 0.5).toFixed(1) + 'x';
    document.getElementById('prestige-cost').textContent = Math.floor(10000 * Math.pow(1.5, userData.rebirths || 0));
    
    // –ü–∏—Ç–æ–º—Ü—ã
    document.getElementById('pets-count').textContent = (userData.pets || []).length;
    document.getElementById('total-pets').textContent = (userData.pets || []).length;
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –±–æ–Ω—É—Å—ã
    updatePetBonuses();
}

function saveData() {
    localStorage.setItem('hub_data', JSON.stringify(hubData));
    localStorage.setItem('hub_tom', JSON.stringify(tomData));
    localStorage.setItem('hub_chat', JSON.stringify(chatData));
}

// ====================
// –¢–ê–ú–ê–ì–û–ß–ò –¢–û–ú 2
// ====================
function startTomSystem() {
    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º—è
    const now = Date.now();
    const diff = now - (tomData.lastUpdate || now);
    const minutesPassed = diff / (1000 * 60);
    
    if (minutesPassed > 1) {
        tomData.health = Math.max(0, tomData.health - minutesPassed * 0.5);
        tomData.food = Math.max(0, tomData.food - minutesPassed * 1);
        tomData.energy = Math.max(0, tomData.energy - minutesPassed * 0.7);
        tomData.mood = Math.max(0, tomData.mood - minutesPassed * 0.3);
    }
    
    updateTomUI();
    
    // –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    setInterval(() => {
        tomData.health = Math.max(0, tomData.health - 0.1);
        tomData.food = Math.max(0, tomData.food - 0.2);
        tomData.energy = Math.max(0, tomData.energy - 0.15);
        tomData.mood = Math.max(0, tomData.mood - 0.08);
        tomData.lastUpdate = Date.now();
        
        updateTomUI();
        saveData();
    }, 10000); // –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
}

function updateTomUI() {
    document.getElementById('tom-health').textContent = Math.round(tomData.health);
    document.getElementById('tom-food').textContent = Math.round(tomData.food);
    document.getElementById('tom-energy').textContent = Math.round(tomData.energy);
    document.getElementById('tom-mood').textContent = Math.round(tomData.mood);
    
    document.getElementById('h-bar').style.width = tomData.health + '%';
    document.getElementById('f-bar').style.width = tomData.food + '%';
    document.getElementById('e-bar').style.width = tomData.energy + '%';
    document.getElementById('m-bar').style.width = tomData.mood + '%';
    
    // –≠–º–æ—Ü–∏–∏
    const tomState = document.getElementById('tom-state');
    if (tomData.health < 30) tomState.textContent = "ü§ï";
    else if (tomData.food < 20) tomState.textContent = "üçï?";
    else if (tomData.energy < 20) tomState.textContent = "üò¥";
    else if (tomData.mood < 30) tomState.textContent = "üòæ";
    else tomState.textContent = "üò∏";
    
    // –û–¥–µ–∂–¥–∞
    const clothesElement = document.getElementById('tom-clothes');
    clothesElement.innerHTML = tomData.clothing ? clothingItems[tomData.clothing].emoji : '';
}

function tomAction(action) {
    const messageElement = document.getElementById('tom-message');
    
    switch(action) {
        case 'feed':
            if (tomData.food >= 100) {
                messageElement.textContent = "–Ø –Ω–µ –≥–æ–ª–æ–¥–µ–Ω!";
                return;
            }
            tomData.food = Math.min(100, tomData.food + 30);
            tomData.mood = Math.min(100, tomData.mood + 5);
            messageElement.textContent = "–í–∫—É—Å–Ω–æ! –ú—É—Ä—Ä—Ä...";
            break;
            
        case 'sleep':
            tomData.energy = 100;
            tomData.health = Math.min(100, tomData.health + 10);
            messageElement.textContent = "Zzz... –•–æ—Ä–æ—à–æ —Å–ø–ª—é...";
            break;
            
        case 'play':
            if (tomData.energy < 20) {
                messageElement.textContent = "–Ø —É—Å—Ç–∞–ª –¥–ª—è –∏–≥—Ä—ã!";
                return;
            }
            tomData.energy = Math.max(0, tomData.energy - 15);
            tomData.mood = Math.min(100, tomData.mood + 25);
            messageElement.textContent = "–£—Ä–∞! –ò–≥—Ä–∞–µ–º!";
            break;
            
        case 'clean':
            tomData.mood = Math.min(100, tomData.mood + 10);
            messageElement.textContent = "–ß–∏—Å—Ç–æ—Ç–∞ - –∑–∞–ª–æ–≥ –∑–¥–æ—Ä–æ–≤—å—è!";
            break;
            
        case 'heal':
            tomData.health = 100;
            messageElement.textContent = "–°–ø–∞—Å–∏–±–æ, —è –∑–¥–æ—Ä–æ–≤!";
            break;
            
        case 'pet':
            tomData.mood = Math.min(100, tomData.mood + 15);
            messageElement.textContent = "–ú—É—Ä—Ä—Ä... ‚ù§";
            break;
    }
    
    updateTomUI();
    saveData();
    
    // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        messageElement.textContent = '';
    }, 2000);
}

// ====================
// –ú–ê–ô–ù–ï–† –ò –ü–ï–†–ï–†–û–ñ–î–ï–ù–ò–Ø
// ====================
function clickCore() {
    const core = document.getElementById('core');
    const userData = hubData[currentUser];
    const multiplier = 1 + (userData.rebirths || 0) * 0.5;
    
    // –ê–Ω–∏–º–∞—Ü–∏—è
    core.style.transform = 'scale(0.9)';
    setTimeout(() => {
        core.style.transform = 'scale(1)';
    }, 100);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –±–∞–π—Ç—ã
    userData.bytes += Math.floor(10 * multiplier);
    hubData[currentUser] = userData;
    
    updateAllUI();
    saveData();
}

function prestige() {
    const userData = hubData[currentUser];
    const cost = Math.floor(10000 * Math.pow(1.5, userData.rebirths || 0));
    
    if (userData.bytes < cost) {
        alert(`–ù—É–∂–Ω–æ ${cost} BYTES –¥–ª—è –ø–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏—è!`);
        return;
    }
    
    if (!confirm(`–ü–µ—Ä–µ—Ä–æ–¥–∏—Ç—å—Å—è –∑–∞ ${cost} BYTES? –í—ã –ø–æ–ª—É—á–∏—Ç–µ +0.5x –∫ –º–Ω–æ–∂–∏—Ç–µ–ª—é!`)) {
        return;
    }
    
    userData.bytes -= cost;
    userData.rebirths = (userData.rebirths || 0) + 1;
    
    hubData[currentUser] = userData;
    updateAllUI();
    saveData();
    alert(`–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–µ #${userData.rebirths}! –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ç–µ–ø–µ—Ä—å: ${(1 + userData.rebirths * 0.5).toFixed(1)}x`);
}

// ====================
# –Ø–ô–¶–ê –ò –ü–ò–¢–û–ú–¶–´
# ====================
function buyEgg(type) {
    const userData = hubData[currentUser];
    const price = eggPrices[type];
    
    if (userData.bytes < price) {
        alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BYTES! –ù—É–∂–Ω–æ: ${price}`);
        return;
    }
    
    userData.bytes -= price;
    hubData[currentUser] = userData;
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —è–π—Ü–æ
    const result = openEgg(type);
    const resultElement = document.getElementById('egg-result');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    resultElement.innerHTML = `
        <h4>üéâ –í–´ –ü–û–õ–£–ß–ò–õ–ò:</h4>
        ${result.map(pet => `
            <div style="margin: 10px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                <span style="font-size: 30px;">${pet.emoji}</span>
                <h4>${pet.name}</h4>
                <p>${pet.bonus}</p>
            </div>
        `).join('')}
    `;
    resultElement.style.display = 'block';
    
    // –î–æ–±–∞–≤–ª—è–µ–º –ø–∏—Ç–æ–º—Ü–µ–≤
    if (!userData.pets) userData.pets = [];
    result.forEach(pet => {
        userData.pets.push({
            ...pet,
            active: true
        });
    });
    
    hubData[currentUser] = userData;
    updateAllUI();
    renderPets();
    saveData();
    
    // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    setTimeout(() => {
        resultElement.style.display = 'none';
    }, 5000);
}

function openEgg(type) {
    const results = [];
    
    // –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —è–π—Ü–∞
    switch(type) {
        case 'common':
            // 80% common, 15% rare, 4% epic, 1% mythic
            const roll1 = Math.random() * 100;
            if (roll1 < 80) results.push(getRandomPet('common'));
            else if (roll1 < 95) results.push(getRandomPet('rare'));
            else if (roll1 < 99) results.push(getRandomPet('epic'));
            else results.push(getRandomPet('mythic'));
            break;
            
        case 'rare':
            // 70% rare, 25% epic, 4% mythic, 1% legendary
            const roll2 = Math.random() * 100;
            if (roll2 < 70) results.push(getRandomPet('rare'));
            else if (roll2 < 95) results.push(getRandomPet('epic'));
            else if (roll2 < 99) results.push(getRandomPet('mythic'));
            else results.push(getRandomPet('legendary'));
            break;
            
        case 'epic':
            // 65% epic, 30% mythic, 4% legendary, 1% secret
            const roll3 = Math.random() * 100;
            if (roll3 < 65) results.push(getRandomPet('epic'));
            else if (roll3 < 95) results.push(getRandomPet('mythic'));
            else if (roll3 < 99) results.push(getRandomPet('legendary'));
            else results.push(getRandomPet('secret'));
            break;
            
        case 'mythic':
            // 60% mythic, 35% legendary, 4% secret, 1% god
            const roll4 = Math.random() * 100;
            if (roll4 < 60) results.push(getRandomPet('mythic'));
            else if (roll4 < 95) results.push(getRandomPet('legendary'));
            else if (roll4 < 99) results.push(getRandomPet('secret'));
            else results.push(getRandomPet('god'));
            break;
            
        case 'legendary':
            // 70% legendary, 25% secret, 5% god
            const roll5 = Math.random() * 100;
            if (roll5 < 70) results.push(getRandomPet('legendary'));
            else if (roll5 < 95) results.push(getRandomPet('secret'));
            else results.push(getRandomPet('god'));
            break;
            
        case 'secret':
            // 85% secret, 15% god
            const roll6 = Math.random() * 100;
            if (roll6 < 85) results.push(getRandomPet('secret'));
            else results.push(getRandomPet('god'));
            break;
            
        case 'god':
            // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ god + 3 legendary
            results.push(getRandomPet('god'));
            for (let i = 0; i < 3; i++) {
                results.push(getRandomPet('legendary'));
            }
            break;
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º 1-2 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∏—Ç–æ–º—Ü–∞
    const extraCount = Math.floor(Math.random() * 2) + 1;
    for (let i = 0; i < extraCount; i++) {
        // –®–∞–Ω—Å –Ω–∞ –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–π —Ä–∞–Ω–≥
        const extraRoll = Math.random();
        if (extraRoll < 0.7) results.push(getRandomPet('common'));
        else if (extraRoll < 0.9) results.push(getRandomPet('rare'));
        else results.push(getRandomPet('epic'));
    }
    
    return results;
}

function getRandomPet(rarity) {
    const pool = petsDatabase[rarity];
    return {...pool[Math.floor(Math.random() * pool.length)]};
}

function renderPets() {
    const container = document.getElementById('pets-container');
    const userData = hubData[currentUser];
    const pets = userData.pets || [];
    
    container.innerHTML = '';
    
    pets.forEach((pet, index) => {
        const petCard = document.createElement('div');
        petCard.className = 'pet-card';
        petCard.innerHTML = `
            <span class="pet-icon">${pet.emoji}</span>
            <h4>${pet.name}</h4>
            <p>${pet.bonus}</p>
            <p>–°—Ç–∞—Ç—É—Å: <span style="color:${pet.active ? '#00ff00' : '#ff5555'}">${pet.active ? '–ê–ö–¢–ò–í–ï–ù' : '–ù–ï–ê–ö–¢–ò–í–ï–ù'}</span></p>
            <button class="btn-small" onclick="togglePet(${index})">${pet.active ? '‚úñ' : '‚úî'}</button>
        `;
        container.appendChild(petCard);
    });
}

function togglePet(index) {
    const userData = hubData[currentUser];
    if (userData.pets && userData.pets[index]) {
        userData.pets[index].active = !userData.pets[index].active;
        hubData[currentUser] = userData;
        renderPets();
        updatePetBonuses();
        saveData();
    }
}

function activateAllPets() {
    const userData = hubData[currentUser];
    if (userData.pets) {
        userData.pets.forEach(pet => pet.active = true);
        hubData[currentUser] = userData;
        renderPets();
        updatePetBonuses();
        saveData();
    }
}

function updatePetBonuses() {
    const userData = hubData[currentUser];
    const pets = userData.pets || [];
    const activePets = pets.filter(p => p.active);
    
    document.getElementById('active-bonuses').textContent = activePets.length;
    
    // –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç –æ–±—â–µ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è –æ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤
    let petMultiplier = 1;
    activePets.forEach(pet => {
        petMultiplier += pet.value || 0;
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –º–Ω–æ–∂–∏—Ç–µ–ª—å –≤ UI
    const rebirthMultiplier = 1 + (userData.rebirths || 0) * 0.5;
    document.getElementById('multiplier').textContent = (rebirthMultiplier * petMultiplier).toFixed(1) + 'x';
}

// ====================
# –ú–ê–ì–ê–ó–ò–ù –û–î–ï–ñ–î–´
# ====================
function buyClothing(item, price) {
    const userData = hubData[currentUser];
    
    if (userData.bytes < price) {
        alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ BYTES! –ù—É–∂–Ω–æ: ${price}`);
        return;
    }
    
    if (!userData.clothing) userData.clothing = [];
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ
    if (userData.clothing.includes(item)) {
        alert('–≠—Ç–∞ –æ–¥–µ–∂–¥–∞ —É–∂–µ –∫—É–ø–ª–µ–Ω–∞!');
        return;
    }
    
    userData.bytes -= price;
    userData.clothing.push(item);
    hubData[currentUser] = userData;
    
    updateAllUI();
    renderOwnedClothing();
    saveData();
    alert(`–ö—É–ø–ª–µ–Ω–æ: ${clothingItems[item].name}`);
}

function renderOwnedClothing() {
    const container = document.getElementById('owned-clothing');
    const userData = hubData[currentUser];
    const owned = userData.clothing || [];
    
    container.innerHTML = '';
    
    owned.forEach(item => {
        const clothing = clothingItems[item];
        const div = document.createElement('div');
        div.className = 'shop-item';
        div.innerHTML = `
            <h4>${clothing.emoji} ${clothing.name}</h4>
            <button class="btn-small" onclick="wearClothing('${item}')">–ù–ê–î–ï–¢–¨</button>
        `;
        container.appendChild(div);
    });
}

function wearClothing(item) {
    tomData.clothing = item;
    updateTomUI();
    saveData();
    alert(`–ù–∞–¥–µ—Ç–æ: ${clothingItems[item].name}`);
}

// ====================
# –ò–ì–†–ê COUNTER-STRIKE
# ====================
let csGameState = {
    player: { x: 100, y: 200, health: 100 },
    enemies: [],
    bullets: [],
    score: 0,
    ammo: 30,
    totalAmmo: 120,
    map: 'dust2'
};

function startCSGame() {
    const gameDiv = document.getElementById('cs-game');
    gameDiv.innerHTML = '';
    
    // –°–æ–∑–¥–∞–µ–º –∏–≥—Ä–æ–∫–∞
    const player = document.createElement('div');
    player.className = 'player';
    player.id = 'cs-player';
    gameDiv.appendChild(player);
    
    // –°–æ–∑–¥–∞–µ–º –≤—Ä–∞–≥–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞
    const mode = document.getElementById('game-mode').value;
    const enemyCount = mode === '1v1' ? 1 : 7; // 1 –≤—Ä–∞–≥ –∏–ª–∏ 7 (4 –≤—Ä–∞–≥–∞ + 3 —Å–æ—é–∑–Ω–∏–∫–∞?)
    
    csGameState.enemies = [];
    for (let i = 0; i < enemyCount; i++) {
        const enemy = document.createElement('div');
        enemy.className = 'enemy';
        enemy.style.left = (Math.random() * 500 + 300) + 'px';
        enemy.style.top = (Math.random() * 300) + 'px';
        gameDiv.appendChild(enemy);
        csGameState.enemies.push({
            element: enemy,
            x: parseInt(enemy.style.left),
            y: parseInt(enemy.style.top),
            health: 100
        });
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º UI
    updateCSGame();
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
    if (csInterval) clearInterval(csInterval);
    csInterval = setInterval(gameLoop, 50);
}

function gameLoop() {
    // –î–≤–∏–≥–∞–µ–º –≤—Ä–∞–≥–æ–≤
    csGameState.enemies.forEach(enemy => {
        // –ü—Ä–æ—Å—Ç–æ–π –ò–ò: –¥–≤–∏–≥–∞—Ç—å—Å—è –∫ –∏–≥—Ä–æ–∫—É
        const dx = csGameState.player.x - enemy.x;
        const dy = csGameState.player.y - enemy.y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        
        if (dist > 50) {
            enemy.x += dx / dist * 2;
            enemy.y += dy / dist * 2;
        }
        
        enemy.element.style.left = enemy.x + 'px';
        enemy.element.style.top = enemy.y + 'px';
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –∏–≥—Ä–æ–∫–æ–º
        if (dist < 30) {
            csGameState.player.health -= 0.5;
            updateCSGame();
        }
    });
    
    // –î–≤–∏–≥–∞–µ–º –ø—É–ª–∏
    csGameState.bullets.forEach((bullet, index) => {
        bullet.x += bullet.vx;
        bullet.y += bullet.vy;
        
        if (bullet.element) {
            bullet.element.style.left = bullet.x + 'px';
            bullet.element.style.top = bullet.y + 'px';
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Å –≤—Ä–∞–≥–∞–º–∏
        csGameState.enemies.forEach((enemy, eIndex) => {
            const dx = bullet.x - enemy.x;
            const dy = bullet.y - enemy.y;
            if (Math.sqrt(dx*dx + dy*dy) < 20) {
                // –ü–æ–ø–∞–¥–∞–Ω–∏–µ!
                enemy.health -= 34;
                if (bullet.element) bullet.element.remove();
                csGameState.bullets.splice(index, 1);
                
                if (enemy.health <= 0) {
                    enemy.element.remove();
                    csGameState.enemies.splice(eIndex, 1);
                    csGameState.score += 100;
                    
                    // –°–ø–∞–≤–Ω –Ω–æ–≤–æ–≥–æ –≤—Ä–∞–≥–∞
                    if (csGameState.enemies.length < (document.getElementById('game-mode').value === '1v1' ? 1 : 7)) {
                        spawnEnemy();
                    }
                }
                updateCSGame();
            }
        });
        
        // –£–¥–∞–ª—è–µ–º –ø—É–ª–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ —ç–∫—Ä–∞–Ω–∞
        if (bullet.x > 800 || bullet.x < 0 || bullet.y > 400 || bullet.y < 0) {
            if (bullet.element) bullet.element.remove();
            csGameState.bullets.splice(index, 1);
        }
    });
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–º–µ—Ä—Ç–∏ –∏–≥—Ä–æ–∫–∞
    if (csGameState.player.health <= 0) {
        clearInterval(csInterval);
        alert(`–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á—ë—Ç: ${csGameState.score}`);
        startCSGame();
    }
}

function movePlayer(direction) {
    const speed = 10;
    switch(direction) {
        case 'up': csGameState.player.y = Math.max(0, csGameState.player.y - speed); break;
        case 'down': csGameState.player.y = Math.min(350, csGameState.player.y + speed); break;
        case 'left': csGameState.player.x = Math.max(0, csGameState.player.x - speed); break;
        case 'right': csGameState.player.x = Math.min(750, csGameState.player.x + speed); break;
    }
    updateCSGame();
}

function shoot() {
    if (csGameState.ammo <= 0) {
        alert('–ù–µ—Ç –ø–∞—Ç—Ä–æ–Ω–æ–≤! –ù–∞–∂–º–∏—Ç–µ R –¥–ª—è –ø–µ—Ä–µ–∑–∞—Ä—è–¥–∫–∏.');
        return;
    }
    
    csGameState.ammo--;
    
    // –°–æ–∑–¥–∞–µ–º –ø—É–ª—é
    const bullet = document.createElement('div');
    bullet.className = 'bullet';
    bullet.style.left = (csGameState.player.x + 20) + 'px';
    bullet.style.top = (csGameState.player.y + 20) + 'px';
    document.getElementById('cs-game').appendChild(bullet);
    
    // –ü—É–ª—è –ª–µ—Ç–∏—Ç –≤–ø—Ä–∞–≤–æ (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
    csGameState.bullets.push({
        element: bullet,
        x: csGameState.player.x + 20,
        y: csGameState.player.y + 20,
        vx: 15,
        vy: 0
    });
    
    updateCSGame();
}

function reloadGame() {
    if (csGameState.totalAmmo <= 0) {
        alert('–ù–µ—Ç –∑–∞–ø–∞—Å–Ω—ã—Ö –ø–∞—Ç—Ä–æ–Ω–æ–≤!');
        return;
    }
    
    const needed = 30 - csGameState.ammo;
    const canReload = Math.min(needed, csGameState.totalAmmo);
    
    csGameState.ammo += canReload;
    csGameState.totalAmmo -= canReload;
    
    updateCSGame();
}

function spawnEnemy() {
    const gameDiv = document.getElementById('cs-game');
    const enemy = document.createElement('div');
    enemy.className = 'enemy';
    enemy.style.left = (Math.random() * 500 + 300) + 'px';
    enemy.style.top = (Math.random() * 300) + 'px';
    gameDiv.appendChild(enemy);
    csGameState.enemies.push({
        element: enemy,
        x: parseInt(enemy.style.left),
        y: parseInt(enemy.style.top),
        health: 100
    });
}

function updateCSGame() {
    const player = document.getElementById('cs-player');
    if (player) {
        player.style.left = csGameState.player.x + 'px';
        player.style.top = csGameState.player.y + 'px';
    }
    
    document.getElementById('cs-score').textContent = csGameState.score;
    document.getElementById('cs-health').textContent = Math.round(csGameState.player.health);
    document.getElementById('cs-ammo').textContent = csGameState.ammo + '/' + csGameState.totalAmmo;
}

function changeMap() {
    const map = document.getElementById('map-select').value;
    csGameState.map = map;
    const gameDiv = document.getElementById('cs-game');
    gameDiv.style.background = map === 'dust2' ? '#1a1a2e' : '#2e1a1a';
    startCSGame();
}

function changeGameMode() {
    startCSGame();
}

// ====================
# –ß–ê–¢
# ====================
function loadChat() {
    const container = document.getElementById('chat-container');
    container.innerHTML = '';
    
    chatData.forEach(msg => {
        const msgDiv = document.createElement('div');
        msgDiv.className = `message ${msg.user === currentUser ? 'me' : ''}`;
        msgDiv.innerHTML = `
            <strong>${msg.user}</strong> (${msg.time}):
            <br>${msg.text}
            <span class="message-time">${msg.time}</span>
        `;
        container.appendChild(msgDiv);
    });
    
    scrollChatToBottom();
}

function sendMessage() {
    const input = document.getElementById('chat-input');
    const text = input.value.trim();
    
    if (!text) return;
    
    const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    const message = {
        user: currentUser,
        text: text,
        time: time
    };
    
    chatData.push(message);
    if (chatData.length > 100) chatData.shift(); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
    
    localStorage.setItem('hub_chat', JSON.stringify(chatData));
    loadChat();
    input.value = '';
}

function scrollChatToBottom() {
    const container = document.getElementById('chat-container');
    container.scrollTop = container.scrollHeight;
}

// ====================
# –ù–ê–°–¢–†–û–ô–ö–ò
# ====================
function setTheme(theme) {
    document.body.className = '';
    document.body.classList.add(theme + '-theme');
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–º—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (hubData[currentUser]) {
        hubData[currentUser].theme = theme;
        saveData();
    }
}

function changeControls() {
    const type = document.getElementById('control-type').value;
    if (type === 'touch') {
        document.body.classList.add('mobile');
    } else {
        document.body.classList.remove('mobile');
    }
}

// ====================
# –†–ï–ô–¢–ò–ù–ì
# ====================
function renderLeaders() {
    const list = document.getElementById('leader-list');
    list.innerHTML = '';
    
    const leaders = Object.entries(hubData)
        .map(([name, data]) => ({
            name,
            bytes: data.bytes || 0,
            rebirths: data.rebirths || 0,
            pets: (data.pets || []).length
        }))
        .sort((a, b) => b.bytes - a.bytes);
    
    leaders.forEach((user, index) => {
        const div = document.createElement('div');
        div.className = `leader-item ${user.name === currentUser ? 'me' : ''}`;
        div.innerHTML = `
            <span>${index + 1}. ${user.name}</span>
            <span>${user.bytes} BYTES</span>
            <span>–ü–µ—Ä–µ—Ä–æ–∂–¥–µ–Ω–∏–π: ${user.rebirths}</span>
            <span>–ü–∏—Ç–æ–º—Ü–µ–≤: ${user.pets}</span>
        `;
        list.appendChild(div);
    });
}

// ====================
# –ê–î–ú–ò–ù-–§–£–ù–ö–¶–ò–ò
# ====================
function addBytes(amount) {
    if (!hubData[currentUser]) return;
    hubData[currentUser].bytes += amount;
    updateAllUI();
    saveData();
    alert(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} BYTES`);
}

function unlockAll() {
    if (!hubData[currentUser]) return;
    hubData[currentUser].bytes = 1000000;
    hubData[currentUser].rebirths = 10;
    hubData[currentUser].clothing = Object.keys(clothingItems);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ—Ö –ø–∏—Ç–æ–º—Ü–µ–≤
    hubData[currentUser].pets = [];
    Object.values(petsDatabase).forEach(category => {
        category.forEach(pet => {
            hubData[currentUser].pets.push({...pet, active: true});
        });
    });
    
    updateAllUI();
    renderPets();
    renderOwnedClothing();
    saveData();
    alert('–í—Å—ë —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ!');
}

function fullReset() {
    if (confirm('–í–ù–ò–ú–ê–ù–ò–ï! –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) {
        localStorage.clear();
        location.reload();
    }
}

// ====================
# –£–¢–ò–õ–ò–¢–´
# ====================
function startGameClock() {
    setInterval(() => {
        const now = new Date();
        document.getElementById('clock').textContent = 
            now.toLocaleTimeString('ru-RU', { hour12: false });
    }, 1000);
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
window.onkeydown = function(e) {
    // –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
    if (e.key === 'F8' && currentUser === "–ù–∏–∫–∏—Ç–∞") {
        document.getElementById('admin-panel').style.display = 'block';
    }
    
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π CS
    if (document.getElementById('cs').classList.contains('active')) {
        switch(e.key.toLowerCase()) {
            case 'w': movePlayer('up'); break;
            case 's': movePlayer('down'); break;
            case 'a': movePlayer('left'); break;
            case 'd': movePlayer('right'); break;
            case ' ': shoot(); e.preventDefault(); break;
            case 'r': reloadGame(); break;
        }
    }
    
    // –ë—ã—Å—Ç—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
    if (e.key === 'Enter' && document.getElementById('chat-input') === document.activeElement) {
        sendMessage();
    }
};

// –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
window.addEventListener('load', () => {
    // –ï—Å–ª–∏ —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–≤ —Å–ª—É—á–∞–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
    const lastUser = localStorage.getItem('last_user');
    if (lastUser && hubData[lastUser]) {
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
        currentUser = lastUser;
        document.getElementById('auth-overlay').style.display = 'none';
        document.getElementById('main-content').style.display = 'flex';
        document.getElementById('user-tag').innerText = `IDENTIFIED: ${lastUser}`;
        updateAllUI();
        startTomSystem();
        loadChat();
        startGameClock();
        renderLeaders();
    }
});

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
window.addEventListener('beforeunload', () => {
    localStorage.setItem('last_user', currentUser);
});
</script>
</body>
</html>
